# Отчет о расследовании: Почему project-scheduler.js не поменялся с PR#24 и PR#26?

## Вопрос из Issue #27
Почему файл `project-scheduler.js` не изменился с PR#24 и PR#26?

## Краткий ответ
**Файл `project-scheduler.js` ИЗМЕНИЛСЯ в PR#24!** В PR#26 он не менялся, так как это не требовалось.

## Детальное расследование

### 1. Анализ PR#24

**PR#24**: "Параллельное выполнение задач на разных захватках с координатным распределением исполнителей"
- **Статус**: MERGED (слит в main)
- **URL**: https://github.com/ideav/orbits/pull/24
- **Коммит с изменениями**: `7459318e08db09b1cbcdab5fc8c60ba90eff4e5a`

**Изменения в project-scheduler.js:**
- Добавлено: +473 строк
- Удалено: -31 строка
- Всего изменено: 504 строки

**Основные добавленные функции:**
1. `parseCoordinates(coordStr)` - парсинг координат (строки 646-664)
2. `calculateDistance(coord1, coord2)` - расчет расстояния по формуле Гаверсина (строки 670-687)
3. Обновлена функция `scheduleTasks()` - поддержка захваток и параллельного выполнения
4. Обновлена функция `assignExecutors()` - назначение исполнителей по расстоянию
5. Добавлена колонка "Захватка" в таблицу (строка 1205, 1251)

**Подтверждение в текущем коде:**
```javascript
// Строка 646: project-scheduler.js
function parseCoordinates(coordStr) { ... }

// Строка 670: project-scheduler.js
function calculateDistance(coord1, coord2) { ... }

// Строка 1205: заголовок таблицы
<th>Захватка</th>

// Строка 1251: данные в строке таблицы
<td>${item.grip || '-'}</td>
```

### 2. Анализ PR#26

**PR#26**: "Колонка Захватка в таблице График выполнения проекта"
- **Статус**: MERGED (слит в main)
- **URL**: https://github.com/ideav/orbits/pull/26

**Изменения в project-scheduler.js:**
- **НЕТ ИЗМЕНЕНИЙ** в `project-scheduler.js`
- Изменен только файл `CLAUDE.md` (+8 строк)

**Описание PR#26:**
В описании PR#26 явно указано:
> **Колонка "Захватка" УЖЕ РЕАЛИЗОВАНА** в текущей версии кода (ветка main).

PR#26 был создан для проверки наличия колонки "Захватка" в ответ на issue #25. В результате проверки выяснилось, что функциональность уже реализована в PR#24, поэтому дополнительные изменения в `project-scheduler.js` не требовались.

### 3. История коммитов

```
* 57b1979 - Merge pull request #26 (только CLAUDE.md)
* 2a2b5a0 - Merge pull request #24 (project-scheduler.js + test-parallel-grips.js)
  * 7459318 - Implement parallel execution... (ЗДЕСЬ ИЗМЕНЕН project-scheduler.js)
  * 2f134c6 - Revert "Initial commit..." (только CLAUDE.md)
```

### 4. Проверка текущего состояния

Команда для проверки изменений:
```bash
git diff b1534bc..main -- project-scheduler.js
```

Результат показывает, что между коммитом `b1534bc` (до PR#24) и текущим `main` файл `project-scheduler.js` **значительно изменен** - добавлены все функции из PR#24.

### 5. Возможная причина недопонимания

**Гипотеза**: Вопрос в issue #27 мог возникнуть из-за того, что:
1. В описании PR#26 написано "колонка уже реализована"
2. Но при этом в PR#26 нет изменений в `project-scheduler.js`
3. Это могло создать впечатление, что изменения из PR#24 не попали в main

**Реальность**:
- Изменения из PR#24 **успешно попали в main**
- PR#26 не менял `project-scheduler.js` потому что **не было необходимости** (всё уже было реализовано в PR#24)

## Заключение

### Ответ на вопрос issue #27:

**Файл `project-scheduler.js` ИЗМЕНИЛСЯ в PR#24** (коммит 7459318):
- ✅ Добавлены функции `parseCoordinates()` и `calculateDistance()`
- ✅ Добавлена поддержка параллельного выполнения на захватках
- ✅ Добавлена колонка "Захватка" в таблицу вывода
- ✅ Реализовано назначение исполнителей по координатам

**Файл `project-scheduler.js` НЕ ИЗМЕНИЛСЯ в PR#26**, потому что:
- ✅ Все необходимые изменения уже были реализованы в PR#24
- ✅ PR#26 был создан для проверки и подтверждения наличия функциональности
- ✅ Дополнительные изменения не требовались

### Доказательства

1. **Текущий код** в main содержит все функции из PR#24
2. **Git diff** показывает изменения между до и после PR#24
3. **PR#24 description** подробно описывает все изменения
4. **PR#26 description** явно указывает, что функциональность уже реализована

## Рекомендации

Если есть сомнения в корректности реализации, рекомендуется:
1. Проверить работу функций `parseCoordinates()` и `calculateDistance()` (строки 646-687)
2. Убедиться, что колонка "Захватка" отображается в таблице (строки 1205, 1251)
3. Запустить тесты из файла `test-parallel-grips.js` (24 теста, все должны проходить)
4. Проверить логи параллельного выполнения задач на разных захватках

---

**Дата расследования**: 2025-12-04
**Исследователь**: Claude Code AI Assistant
